{"version":3,"file":"static/js/207.1347bb6b.chunk.js","mappings":"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","sources":["Api/Api.jsx","components/State/State.jsx","page/BeerShop/BeerShop.styled.jsx","page/BeerShop/BeerShop.jsx"],"sourcesContent":["import axios from 'axios';\n\nexport async function getApi(endpoint, params) {\n  const BASE_URL = 'https://api.punkapi.com/v2/beers';\n  const END_URL = {\n    beers: `?page=${params}`,\n    getBeerbyId: `/${params}`,\n  };\n\n  try {\n    const response = await axios.get(`${BASE_URL}${END_URL[endpoint]}`);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n","import { create } from 'zustand';\n\nexport const useBearStore = create(set => ({\n  beerStatus: JSON.parse(window.localStorage.getItem('status')) ?? [],\n  index: 0,\n  limit: 15,\n  beers: JSON.parse(window.localStorage.getItem('beers')) ?? [],\n  beerId: [],\n  shopping: JSON.parse(window.localStorage.getItem('shooping')) ?? [],\n  page: 1,\n  fetching: false,\n  changeStatusBeer: array =>\n    set(({ beerStatus }) => ({ beerStatus: [...array] })),\n  changeIndex: operator =>\n    set(state => ({\n      index: operator ? state.index + 5 : state.index - 5,\n    })),\n  changeLimit: operator =>\n    set(state => ({\n      limit: operator ? state.limit + 5 : state.limit - 5,\n    })),\n  addBeers: items => set(() => ({ beers: [...items] })),\n  addBeerId: item => set(() => ({ beerId: [...item] })),\n  addPage: () => set(state => ({ page: state.page + 1 })),\n  addToShopping: bear =>\n    set(({ shopping }) => ({ shopping: [...shopping, ...bear] })),\n  removeBeerFromShopping: newItems => set(() => ({ shopping: [...newItems] })),\n  togglFetching: value => set(state => ({ fetching: value })),\n}));\n\nexport default useBearStore;\n","import styled from '@emotion/styled';\nimport { Link } from 'react-router-dom';\n\nexport const Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n  /* padding: 10px; */\n  padding-top: 10px;\n`;\n\nexport const Title = styled.h2`\n  padding: 30px 20px 20px 20px;\n  font-size: 30px;\n  gap: 10px;\n`;\n\nexport const List = styled.ul`\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 125px;\n  padding: 20px;\n  border-radius: 30px;\n  box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.75);\n  background-color: #86940a;\n`;\n\nexport const Items = styled.li`\n  padding: 20px 40px 20px 40px;\n  width: 180px;\n  height: auto;\n  font-size: 20px;\n  font-weight: 700;\n  border: 2px solid rgba(148, 148, 148, 0.4);\n  border-radius: 10px 9px 10px 10px;\n\n  z-index: 1000;\n  background-color: saddlebrown;\n`;\n\nexport const Image = styled.img`\n  width: 180px;\n  height: 400px;\n`;\n\nexport const BeerLink = styled(Link)`\n  font-size: 18px;\n  font-weight: 400;\n  margin-top: 20px;\n  margin-bottom: 20px;\n  display: flex;\n  width: 180px;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const ButtonBuy = styled.button`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 180px;\n  background-color: #12cf12;\n  color: white;\n  padding: 20px 30px;\n  border-radius: 10px;\n  &:hover {\n    -webkit-box-shadow: 0px 0px 20px 1px rgba(66, 66, 66, 0.7);\n    box-shadow: 0px 0px 20px 1px rgba(66, 66, 66, 0.7);\n  }\n`;\nexport const ButtonDelite = styled.button`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 180px;\n  background-color: #cf2912;\n  color: white;\n  padding: 20px 30px;\n  border-radius: 10px;\n  &:hover {\n    -webkit-box-shadow: 0px 0px 20px 1px rgba(66, 66, 66, 0.7);\n    box-shadow: 0px 0px 20px 1px rgba(66, 66, 66, 0.7);\n  }\n`;\n","import { useEffect } from 'react';\n\nimport { Link, useLocation } from 'react-router-dom';\nimport {\n  Container,\n  List,\n  Items,\n  BeerLink,\n  Image,\n  ButtonBuy,\n  ButtonDelite,\n} from './BeerShop.styled';\n\nimport { getApi } from 'Api/Api';\nimport useBearStore from 'components/State/State';\n\nconst BeerShop = () => {\n  const location = useLocation();\n  const {\n    changeStatusBeer,\n    beerStatus,\n    index,\n    changeIndex,\n    limit,\n    changeLimit,\n    beers,\n    addBeers,\n    shopping,\n    page,\n    fetching,\n    addToShopping,\n    togglFetching,\n    addPage,\n\n    removeBeerFromShopping,\n  } = useBearStore();\n\n  const buyBeer = e => {\n    const idBeer = e.target.id;\n\n    const findBeer = beers.filter(({ id }) => id === Number(idBeer));\n\n    const findDubl = shopping.find(({ id }) => id === Number(idBeer));\n\n    if (!findDubl) {\n      window.localStorage.setItem(\n        'shooping',\n        JSON.stringify([...shopping, ...findBeer])\n      );\n      addToShopping(findBeer);\n    }\n  };\n  const deleteBeer = e => {\n    const idBeer = e.target.id;\n    const newArrayBeers = shopping.filter(({ id }) => id !== Number(idBeer));\n    window.localStorage.removeItem('shooping');\n    window.localStorage.setItem('shooping', JSON.stringify(newArrayBeers));\n    removeBeerFromShopping(newArrayBeers);\n  };\n\n  useEffect(() => {\n    getApi('beers', 1).then(([...item]) => {\n      window.localStorage.setItem('beers', JSON.stringify(item));\n      addBeers(item);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (beers.length === limit) {\n      return;\n    }\n    const options = {\n      threshold: 0.8,\n    };\n\n    const firstItemObserver = new IntersectionObserver(\n      callbackForFirstItem,\n      options\n    );\n    const array = [];\n    document.querySelectorAll(`#item`).forEach(li => {\n      array.push(li);\n    });\n\n    const firstItem = array[0];\n    if (firstItem) {\n      firstItemObserver.observe(firstItem);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [index]);\n\n  useEffect(() => {\n    if (fetching) {\n      return;\n    }\n    const options = {\n      threshold: 0.8,\n    };\n    const lastItemObserver = new IntersectionObserver(\n      callbackForLastItem,\n      options\n    );\n    const array = [];\n    document.querySelectorAll(`#item`).forEach(li => {\n      array.push(li);\n    });\n\n    const lastItem = array[array.length - 1];\n\n    if (lastItem) {\n      lastItemObserver.observe(lastItem);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [beers, index, beerStatus]);\n\n  useEffect(() => {\n    if (fetching) {\n      getApi('beers', page).then(([...item]) => {\n        const newArray = [...beers, ...item];\n        window.localStorage.removeItem('beers');\n        window.localStorage.setItem('beers', JSON.stringify(newArray));\n        addBeers(newArray);\n        togglFetching(false);\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [fetching]);\n\n  const callbackForFirstItem = function ([entries], observer) {\n    if (entries.isIntersecting && index === 0) {\n      return;\n    }\n    if (entries.isIntersecting) {\n      observer.unobserve(entries.target);\n\n      changeLimit(false);\n      changeIndex(false);\n    }\n  };\n\n  const callbackForLastItem = function ([entries], observer) {\n    if (entries.isIntersecting) {\n      if (beers.length === limit) {\n        observer.unobserve(entries.target);\n\n        addPage();\n\n        changeLimit(true);\n        changeIndex(true);\n\n        togglFetching(true);\n        return;\n      }\n\n      observer.unobserve(entries.target);\n\n      changeLimit(true);\n      changeIndex(true);\n      return;\n    }\n  };\n\n  const handleChangeStatusBeer = e => {\n    const idBeer = e.target.id.toString();\n\n    if (!beerStatus.includes(Number(idBeer))) {\n      beerStatus.push(Number(idBeer));\n      window.localStorage.setItem('status', JSON.stringify(beerStatus));\n      changeStatusBeer(beerStatus);\n    } else {\n      const Index = beerStatus.findIndex(id => id === idBeer);\n\n      beerStatus.splice(Number(Index), 1);\n      window.localStorage.removeItem('status');\n      window.localStorage.setItem('status', JSON.stringify(beerStatus));\n      changeStatusBeer(beerStatus);\n    }\n  };\n\n  const sort = beers.sort(({ id: a }, { id: b }) => a - b);\n\n  return (\n    <Container>\n      <List id=\"scrollArea\">\n        {sort.slice(index, limit).map(\n          ({ id, name, image_url }) => (\n            <Items id=\"item\" key={id}>\n              <Link to={`beers/${id}`} state={{ from: location }}>\n                <Image src={image_url} alt={name} />\n              </Link>\n              <BeerLink to={`beers/${id}`} state={{ from: location }}>\n                Details info fo this beer\n              </BeerLink>\n              {!beerStatus.find(status => status === Number(id)) ? (\n                <ButtonBuy\n                  id={id}\n                  onContextMenu={e => {\n                    e.preventDefault();\n                    buyBeer(e);\n                    handleChangeStatusBeer(e);\n                  }}\n                >\n                  Buy beer\n                </ButtonBuy>\n              ) : (\n                <ButtonDelite\n                  id={id}\n                  onContextMenu={e => {\n                    e.preventDefault();\n                    deleteBeer(e);\n                    handleChangeStatusBeer(e);\n                  }}\n                >\n                  Delete\n                </ButtonDelite>\n              )}\n            </Items>\n          )\n          // )\n        )}\n      </List>\n    </Container>\n  );\n};\n\nexport default BeerShop;\n"],"names":["getApi","endpoint","params","END_URL","beers","getBeerbyId","axios","response","data","console","error","useBearStore","create","set","beerStatus","JSON","parse","window","localStorage","getItem","index","limit","beerId","shopping","page","fetching","changeStatusBeer","array","changeIndex","operator","state","changeLimit","addBeers","items","addBeerId","item","addPage","addToShopping","bear","removeBeerFromShopping","newItems","togglFetching","value","Container","styled","List","Items","Image","BeerLink","Link","ButtonBuy","ButtonDelite","location","useLocation","useEffect","then","setItem","stringify","length","firstItemObserver","IntersectionObserver","callbackForFirstItem","threshold","document","querySelectorAll","forEach","li","push","firstItem","observe","lastItemObserver","callbackForLastItem","lastItem","newArray","removeItem","observer","entries","isIntersecting","unobserve","target","handleChangeStatusBeer","e","idBeer","id","toString","includes","Number","Index","findIndex","splice","sort","slice","map","name","image_url","to","from","src","alt","find","status","onContextMenu","preventDefault","newArrayBeers","filter","deleteBeer","findBeer","buyBeer"],"sourceRoot":""}